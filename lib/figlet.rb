# frozen_string_literal: true

@font = {
    ' ': '',
    '!': " _ \n| |\n| |\n|_|\n(_)",
    '"': " _ _ \n( | )\n V V",
    '#': "   _  _   \n _| || |_ \n|_  ..  _|\n|_    _|\n  |_||_|",
    '$': "  _  \n | | \n/ __)\n\\__ \\\n(   /\n |_|",
    '%': " _  __\n(_)/ /\n  / / \n / /_ \n/_/(_)",
    '&': "  ___   \n ( _ )  \n / _ \\/\\\n| (_>  <\n \\___/\\/",
    '(': "  __\n / /\n| | \n| | \n| | \n \\_\\",
    ')': "__  \n\\ \\ \n | |\n | |\n | |\n/_/",
    '*': "    \n__/\\__\n\\  /\n/_  _\\\n  \\/",
    '+': "     \n   _   \n _| |_ \n|_   _|\n  |_|",
    ',': "   \n   \n   \n _ \n( )\n|/",
    '-': "     \n     \n _____ \n|_____|",
    '.': "   \n   \n   \n _ \n(_)",
    '/': "  __\n   / /\n  / / \n / /  \n/_/",
    '0': "  ___  \n / _ \\ \n| | | |\n| |_| |\n \\___/",
    '1': " _ \n/ |\n| |\n| |\n|_|",
    '2': " ____  \n|___ \\ \n  __) |\n / __/ \n|_____|",
    '3': " _____ \n|___ / \n  |_ \\ \n ___) |\n|____/",
    '4': " _  _   \n| || |  \n| || |_ \n|__   _|\n   |_|",
    '5': " ____  \n| ___| \n|___ \\ \n ___) |\n|____/",
    '6': "  __   \n / /_  \n| '_ \\ \n| (_) |\n \\___/",
    '7': " _____ \n|___  |\n   / / \n  / /  \n /_/",
    '8': "  ___  \n ( _ ) \n / _ \\ \n| (_) |\n \\___/",
    '9': "  ___  \n / _ \\ \n| (_) |\n \\__, |\n   /_/",
    ':': "   \n _ \n(_)\n _ \n(_)",
    ';': "   \n _ \n(_)\n _ \n( )\n|/",
    '<': "  __\n / /\n/ / \n\\ \\ \n \\_\\",
    '=': "     \n _____ \n|_____|\n|_____|",
    '>': "__  \n\\ \\ \n \\ \\\n / /\n/_/",
    '?': " ___ \n|__ \\\n  / /\n |_| \n (_)",
    '@': "   ____  \n  / __ \\ \n / / _` |\n| | (_| |\n \\ \\__,_|\n  \\____/",
    'A': "  _  \n   / \\   \n  / _ \\  \n / ___ \\ \n/_/   \\_\\",
    'B': " ____  \n| __ ) \n|  _ \\ \n| |_) |\n|____/",
    'C': "  ____ \n / ___|\n| |  \n| |___ \n \\____|",
    'D': " ____  \n|  _ \\ \n| | | |\n| |_| |\n|____/",
    'E': " _____ \n| ____|\n|  _|  \n| |___ \n|_____|",
    'F': " _____ \n|  ___|\n| |_   \n|  _|  \n|_|",
    'G': "  ____ \n / ___|\n| |  _ \n| |_| |\n \\____|",
    'H': " _   _ \n| | | |\n| |_| |\n|  _  |\n|_| |_|",
    'I': " ___ \n|_ _|\n | | \n | | \n|___|",
    'J': "   _ \n  | |\n _  | |\n| |_| |\n \\___/",
    'K': " _  __\n| |/ /\n| ' / \n| . \\ \n|_|\\_\\",
    'L': " _   \n| |  \n| |  \n| |___ \n|_____|",
    'M': " __  __ \n|  \\/  |\n| |\\/| |\n| |  | |\n|_|  |_|",
    'N': " _   _ \n| \\ | |\n|  \\| |\n| |\\  |\n|_| \\_|",
    'O': "  ___  \n / _ \\ \n| | | |\n| |_| |\n \\___/",
    'P': " ____  \n|  _ \\ \n| |_) |\n|  __/ \n|_|",
    'Q': "  ___  \n / _ \\ \n| | | |\n| |_| |\n \\__\\_\\",
    'R': " ____  \n|  _ \\ \n| |_) |\n|  _ < \n|_| \\_\\",
    'S': " ____  \n/ ___| \n\\___ \\ \n ___) |\n|____/",
    'T': " _____ \n|_   _|\n  | |  \n  | |  \n  |_|",
    'U': " _   _ \n| | | |\n| | | |\n| |_| |\n \\___/",
    'V': "__   __\n\\ \\   / /\n \\ \\ / / \n  \\ V /  \n   \\_/",
    'W': "__    __\n\\ \\    / /\n \\ \\ /\\ / / \n  \\ V  V /  \n   \\_/\\_/",
    'X': "__  __\n\\ \\/ /\n \\  / \n /  \\ \n/_/\\_\\",
    'Y': "__   __\n\\ \\ / /\n \\ V / \n  | |  \n  |_|",
    'Z': " _____\n|__  /\n  / / \n / /_ \n/____|",
    '[': " __ \n| _|\n| | \n| | \n| | \n|__|",
    '\\': "__  \n\\ \\   \n \\ \\  \n  \\ \\ \n   \\_\\",
    ']': " __ \n|_ |\n | |\n | |\n | |\n|__|",
    '^': " /\\ \n|/\\|",
    '_': "     \n     \n     \n     \n _____ \n|_____|",
    '`': " _ \n( )\n \\|",
    'a': "     \n  __ _ \n / _` |\n| (_| |\n \\__,_|",
    'b': " _   \n| |__  \n| '_ \\ \n| |_) |\n|_.__/",
    'c': "    \n  ___ \n / __|\n| (__ \n \\___|",
    'd': "   _ \n  __| |\n / _` |\n| (_| |\n \\__,_|",
    'e': "    \n  ___ \n / _ \\\n|  __/\n \\___|",
    'f': "  __ \n / _|\n| |_ \n|  _|\n|_|",
    'g': "     \n  __ _ \n / _` |\n| (_| |\n \\__, |\n |___/",
    'h': " _   \n| |__  \n| '_ \\ \n| | | |\n|_| |_|",
    'i': " _ \n(_)\n| |\n| |\n|_|",
    'j': "   _ \n  (_)\n  | |\n  | |\n _/ |\n|__/",
    'k': " _  \n| | __\n| |/ /\n|   < \n|_|\\_\\",
    'l': " _ \n| |\n| |\n| |\n|_|",
    'm': "       \n _ __ ___  \n| '_ ` _ \\ \n| | | | | |\n|_| |_| |_|",
    'n': "     \n _ __  \n| '_ \\ \n| | | |\n|_| |_|",
    'o': "     \n  ___  \n / _ \\ \n| (_) |\n \\___/",
    'p': "     \n _ __  \n| '_ \\ \n| |_) |\n| .__/ \n|_|",
    'q': "     \n  __ _ \n / _` |\n| (_| |\n \\__, |\n  |_|",
    'r': "    \n _ __ \n| '__|\n| |   \n|_|",
    's': "   \n ___ \n/ __|\n\\__ \\\n|___/",
    't': " _   \n| |_ \n| __|\n| |_ \n \\__|",
    'u': "     \n _   _ \n| | | |\n| |_| |\n \\__,_|",
    'v': "     \n__   __\n\\ \\ / /\n \\ V / \n  \\_/",
    'w': "      \n__    __\n\\ \\ /\\ / /\n \\ V  V / \n  \\_/\\_/",
    'x': "    \n__  __\n\\ \\/ /\n >  < \n/_/\\_\\",
    'y': "     \n _   _ \n| | | |\n| |_| |\n \\__, |\n |___/",
    'z': "   \n ____\n|_  /\n / / \n/___|",
    '{': "   __\n  / /\n | | \n< <  \n | | \n  \\_\\",
    '|': " _ \n| |\n| |\n| |\n| |\n|_|",
    '}': "__   \n\\ \\  \n | | \n  > >\n | | \n/_/",
    '~': " /\\/|\n|/\\/"
}

@font_big = {
    ' ': '',
    '!': " _ \n| |\n| |\n| |\n|_|\n(_)",
    '"': " _ _ \n( | )\n V V",
    '#': "   _  _   \n _| || |_ \n|_  __  _|\n _| || |_ \n|_  __  _|\n  |_||_|",
    '$': "  _  \n | | \n/ __)\n\\__ \\\n(   /\n |_|",
    '%': " _   __\n(_) / /\n   / / \n  / /  \n / / _ \n/_/ (_)",
    '&': "    \n  ___   \n ( _ )  \n / _ \\/\\\n| (_>  <\n \\___/\\/",
    '(': "  __\n / /\n| | \n| | \n| | \n| | \n \\_\\",
    ')': "__  \n\\ \\ \n | |\n | |\n | |\n | |\n/_/",
    '*': "  _  \n /\\| |/\\ \n \\ ` ' / \n|_   _|\n / , . \\ \n \\/|_|\\/",
    '+': "     \n   _   \n _| |_ \n|_   _|\n  |_|",
    ',': "   \n   \n   \n   \n _ \n( )\n|/",
    '-': "    \n    \n ______ \n|______|",
    '.': "   \n   \n   \n   \n _ \n(_)",
    '/': "   __\n  / /\n   / / \n  / /  \n / /   \n/_/",
    '0': "  ___  \n / _ \\ \n| | | |\n| | | |\n| |_| |\n \\___/",
    '1': " __ \n/_ |\n | |\n | |\n | |\n |_|",
    '2': " ___  \n|__ \\ \n   ) |\n  / / \n / /_ \n|____|",
    '3': " ____  \n|___ \\ \n  __) |\n |__ < \n ___) |\n|____/",
    '4': " _  _   \n| || |  \n| || |_ \n|__   _|\n   | |  \n   |_|",
    '5': " _____ \n| ____|\n| |__  \n|___ \\ \n ___) |\n|____/",
    '6': "   __  \n  / /  \n / /_  \n| '_ \\ \n| (_) |\n \\___/",
    '7': " ______ \n|____  |\n  / / \n   / /  \n  / /   \n /_/",
    '8': "  ___  \n / _ \\ \n| (_) |\n > _ < \n| (_) |\n \\___/",
    '9': "  ___  \n / _ \\ \n| (_) |\n \\__, |\n   / / \n  /_/",
    ':': "   \n _ \n(_)\n   \n _ \n(_)",
    ';': "   \n _ \n(_)\n   \n _ \n( )\n|/",
    '<': "   __\n  / /\n / / \n< <  \n \\ \\ \n  \\_\\",
    '=': "    \n ______ \n|______|\n ______ \n|______|",
    '>': "__   \n\\ \\  \n \\ \\ \n  > >\n / / \n/_/",
    '?': " ___  \n|__ \\ \n   ) |\n  / / \n |_|  \n (_)",
    '@': "     \n   ____  \n  / __ \\ \n / / _` |\n| | (_| |\n \\ \\__,_|\n  \\____/",
    'A': "      \n  /\\  \n   /  \\   \n  / /\\ \\  \n / ____ \\ \n/_/  \\_\\",
    'B': " ____  \n|  _ \\ \n| |_) |\n|  _ < \n| |_) |\n|____/",
    'C': "  _____ \n / ____|\n| |   \n| |   \n| |____ \n \\_____|",
    'D': " _____  \n|  __ \\ \n| |  | |\n| |  | |\n| |__| |\n|_____/",
    'E': " ______ \n|  ____|\n| |__   \n|  __|  \n| |____ \n|______|",
    'F': " ______ \n|  ____|\n| |__   \n|  __|  \n| |   \n|_|",
    'G': "  _____ \n / ____|\n| |  __ \n| | |_ |\n| |__| |\n \\_____|",
    'H': " _  _ \n| |  | |\n| |__| |\n|  __  |\n| |  | |\n|_|  |_|",
    'I': " _____ \n|_   _|\n  | |  \n  | |  \n _| |_ \n|_____|",
    'J': "    _ \n   | |\n   | |\n _   | |\n| |__| |\n \\____/",
    'K': " _  __\n| |/ /\n| ' / \n|  <  \n| . \\ \n|_|\\_\\",
    'L': " _    \n| |   \n| |   \n| |   \n| |____ \n|______|",
    'M': " __  __ \n|  \\/  |\n| \\  / |\n| |\\/| |\n| |  | |\n|_|  |_|",
    'N': " _   _ \n| \\ | |\n|  \\| |\n| . ` |\n| |\\  |\n|_| \\_|",
    'O': "  ____  \n / __ \\ \n| |  | |\n| |  | |\n| |__| |\n \\____/",
    'P': " _____  \n|  __ \\ \n| |__) |\n|  ___/ \n| |   \n|_|",
    'Q': "  ____  \n / __ \\ \n| |  | |\n| |  | |\n| |__| |\n \\___\\_\\",
    'R': " _____  \n|  __ \\ \n| |__) |\n|  _  / \n| | \\ \\ \n|_|  \\_\\",
    'S': "  _____ \n / ____|\n| (___  \n \\___ \\ \n ____) |\n|_____/",
    'T': " _______ \n|__   __|\n   | |   \n   | |   \n   | |   \n   |_|",
    'U': " _  _ \n| |  | |\n| |  | |\n| |  | |\n| |__| |\n \\____/",
    'V': "__    __\n\\ \\  / /\n \\ \\  / / \n  \\ \\/ /  \n   \\  /   \n  \\/",
    'W': "__      __\n\\ \\    / /\n \\ \\  /\\  / / \n  \\ \\/  \\/ /  \n   \\  /\\  /   \n  \\/  \\/",
    'X': "__   __\n\\ \\ / /\n \\ V / \n  > <  \n / . \\ \n/_/ \\_\\",
    'Y': "__   __\n\\ \\   / /\n \\ \\_/ / \n  \\   /  \n   | |   \n   |_|",
    'Z': " ______\n|___  /\n   / / \n  / /  \n / /__ \n/_____|",
    '[': " ___ \n|  _|\n| |  \n| |  \n| |  \n| |_ \n|___|",
    '\\': "__   \n\\ \\  \n \\ \\   \n  \\ \\  \n   \\ \\ \n  \\_\\",
    ']': " ___ \n|_  |\n  | |\n  | |\n  | |\n _| |\n|___|",
    '^': " /\\ \n|/\\|",
    '_': "    \n    \n    \n    \n    \n    \n ______ \n|______|",
    '`': " _ \n( )\n \\|",
    'a': "     \n     \n  __ _ \n / _` |\n| (_| |\n \\__,_|",
    'b': " _   \n| |  \n| |__  \n| '_ \\ \n| |_) |\n|_.__/",
    'c': "    \n    \n  ___ \n / __|\n| (__ \n \\___|",
    'd': "   _ \n  | |\n  __| |\n / _` |\n| (_| |\n \\__,_|",
    'e': "    \n    \n  ___ \n / _ \\\n|  __/\n \\___|",
    'f': "  __ \n / _|\n| |_ \n|  _|\n| |  \n|_|",
    'g': "     \n     \n  __ _ \n / _` |\n| (_| |\n \\__, |\n  __/ |\n |___/",
    'h': " _   \n| |  \n| |__  \n| '_ \\ \n| | | |\n|_| |_|",
    'i': " _ \n(_)\n _ \n| |\n| |\n|_|",
    'j': "   _ \n  (_)\n   _ \n  | |\n  | |\n  | |\n _/ |\n|__/",
    'k': " _  \n| |   \n| | __\n| |/ /\n|   < \n|_|\\_\\",
    'l': " _ \n| |\n| |\n| |\n| |\n|_|",
    'm': "       \n       \n _ __ ___  \n| '_ ` _ \\ \n| | | | | |\n|_| |_| |_|",
    'n': "     \n     \n _ __  \n| '_ \\ \n| | | |\n|_| |_|",
    'o': "     \n     \n  ___  \n / _ \\ \n| (_) |\n \\___/",
    'p': "     \n     \n _ __  \n| '_ \\ \n| |_) |\n| .__/ \n| |  \n|_|",
    'q': "     \n     \n  __ _ \n / _` |\n| (_| |\n \\__, |\n  | |\n  |_|",
    'r': "    \n    \n _ __ \n| '__|\n| |   \n|_|",
    's': "   \n   \n ___ \n/ __|\n\\__ \\\n|___/",
    't': " _   \n| |  \n| |_ \n| __|\n| |_ \n \\__|",
    'u': "     \n     \n _   _ \n| | | |\n| |_| |\n \\__,_|",
    'v': "     \n     \n__   __\n\\ \\ / /\n \\ V / \n  \\_/",
    'w': "      \n      \n__    __\n\\ \\ /\\ / /\n \\ V  V / \n  \\_/\\_/",
    'x': "    \n    \n__  __\n\\ \\/ /\n >  < \n/_/\\_\\",
    'y': "     \n     \n _   _ \n| | | |\n| |_| |\n \\__, |\n  __/ |\n |___/",
    'z': "   \n   \n ____\n|_  /\n / / \n/___|",
    '{': "   __\n  / /\n | | \n/ /  \n\\ \\  \n | | \n  \\_\\",
    '|': " _ \n| |\n| |\n| |\n| |\n| |\n| |\n|_|",
    '}': "__   \n\\ \\  \n | | \n  \\ \\\n  / /\n | | \n/_/",
    '~': " /\\/|\n|/\\/"
}

require './escape.rb'
include EscSequence

class String
    def nonblank_length
        v_start = self =~ /(?<=\s)\S/
        v_end = self =~ /\s*$/
        v_end - v_start
    rescue StandardError
        0
    end

    def last_nonblank
        self =~ /\s*$/
    end
end

def figlet_char(v)
    return @column += 5 if v.match?(/ /)

    a = @font_big[v.to_sym].split(/\n/)

    max_len = a.map(&:last_nonblank).max
    @column += max_len

    cursor :line, 1
    a.map.with_index do |line, i|
        cursor :pos, @line + i, @column
        print line
    end
end

def figlet_test(v)
    @line = 1
    @column = 1

    screen :new
    cursor :save

    v.each_char { |c| figlet_char c }

    sleep 5
    screen :restore
end

figlet_test 'test string'
